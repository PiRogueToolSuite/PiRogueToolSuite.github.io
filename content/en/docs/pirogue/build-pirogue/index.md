---
title: "Build a PiRogue"
date: 2022-03-07
lastmod: 2022-03-07
draft: false
images: []
menu:
  docs:
    parent: "pirogue"
weight: 20
toc: true
resources:
- name: etcher-:counter
  src: img/etcher-*.png
---

## The hardware you need
In addition to a computer and an Internet connection, you will need, at least, a Raspberry Pi (+ its power supply), a SD-card and an ethernet cable.

### Pick a Raspberry Pi

First, you need a Raspberry Pi. We support the following versions of Raspberry Pi:


* Raspberry Pi 3 Model B
* Raspberry Pi 3 Model B+
* Raspberry Pi 4 Model B - 1GB
* Raspberry Pi 4 Model B - 2GB
* Raspberry Pi 4 Model B - 4GB
* Raspberry Pi 4 Model B - 8GB

**Important note**: Suricata is disabled on devices having less then 1.5GB of RAM.

{{< alert icon="👉" >}}
Be sure to have an appropriate power supply for your PiRogue. If you don't know what to choose, pick the official USB-C Raspberry Pi power supply.
{{< /alert >}}

If you want to buy a Raspberry Pi, visit [the rpilocator website](https://rpilocator.com/?cat=PI4) to check for availability. 


### Pick a micro SD-card

Second, you need a SD-card to run your PiRogue. The SD-card has to be large enough to store the operating system and all the data generated by the PiRogue itself. By default, it stores 5 days of network traffic history.

You may choose:

* a 32GB micro SD-card for regular use
* a 64GB micro SD-card if you plan doing long runs, analyzing the traffic of multiple devices simultaneously

### Pick an ethernet cable

In order to connect the PiRogue to the Internet, you should have an ethernet cable connecting your PiRogue to your network. A simple cat. 5 ethernet cable will do the job.

### Optional stuff

Depending on your needs, you would want to add a hat to your PiRogue and protect everything with a case.

[Build the PiRogue hat →]({{< relref "build-hat" >}})

[Build the PiRogue case →]({{< relref "build-case" >}})

{{< alert icon="👉" >}}
If you don't feel comfortable with building the case or the hat, feel free to buy one by [reaching out to us]({{< relref "contact" >}}).
{{< /alert >}}


## Install PiRogue OS

### Get PiRogue OS
PiRogue OS is periodically released. The OS is pre-configured so you just need to flash it on a micro SD-card. The image (the binary file to be flashed on the SD-card) is compressed. The file you have to download on your computer has a name following this schema 
`PiRogue-OS-<year>-<month>-<day>.img.xz`.

[Download the latest version of PiRogue OS →](https://github.com/PiRogueToolSuite/pirogue-os/releases/latest)


### Set up your SD card
Before flashing the image, you have to unzip the image on your computer. It can be done either by right-clicking on the ZIP file and choosing *Decompress* or with command line using the *unzip* command. Once unzipped, you should have a new file named `PiRogue-OS-<year>-<month>-<day>.img.xz`. This file is the image file you will have to flash on a micro SD-card. Linux users used to use command line can then use the `dd` command to flash their SD-card.

We advice you to [download Balena Etcher](https://www.balena.io/etcher/) and install it on your computer. Run *Balena Etcher* as administrator and follow the steps illustrated by the screenshots below.

[Download Balena Etcher →](https://www.balena.io/etcher/)

{{< img src="etcher-1" alt="The PiRogue" class="d-block mx-auto shadow" >}}
{{< img src="etcher-2" alt="The PiRogue" class="d-block mx-auto shadow" >}}
{{< img src="etcher-3" alt="The PiRogue" class="d-block mx-auto shadow" >}}
{{< img src="etcher-4" alt="The PiRogue" class="d-block mx-auto shadow" >}}
{{< img src="etcher-5" alt="The PiRogue" class="d-block mx-auto shadow" >}}
{{< img src="etcher-6" alt="The PiRogue" class="d-block mx-auto shadow" >}}

Once the flashing is complete, eject the SD-card from your computer.

### Set up the PiRogue
If you have [the hat for your PiRogue]({{< relref "build-hat" >}}), it is the good time for you to plug it in and put everything into [the case]({{< relref "build-case" >}}). Insert your freshly flashed micro SD-card into the PiRogue, plug the ethernet cable to the PiRogue. Remember, this cable connects your PiRogue directly (or through network switch) to your ISP router.

{{< alert icon="👉" >}}
To operate properly, your PiRogue needs to have Internet access.
{{< /alert >}}

If you plan to use the PiRogue in a production environment (office, lab), we suggest you follow the [securing your Raspberry Pi guide](https://www.raspberrypi.com/documentation/computers/configuration.html#securing-your-raspberry-pi).

## First boot

First, check that the SD card is correctly inserted into the appropriate slot of your PiRogue and the ethernet cable is properly connected. Then, plug the power supply. Wait few minutes before trying to access your PiRogue.

Now, connect to your PiRogue using SSH.

```
ssh pi@pirogue.local
```

Type `raspberry` which is the default password and press `Entrer`.

Once connected, you have to finalize the installation of your PiRogue by running the following commands:

```
sudo apt update
sudo apt install pirogue-base -y
sudo apt dist-upgrade -y
sudo reboot
```

During the installation, when prompted, you will have to answer:
* `No` to save iptables rules for IP v4
* `No` to save iptables rules for IP v6
* `Yes` to allow non-root users to capture network traffic 

{{< img src="img/install-1.png" alt="Allow non-root users to capture network traffic" class="d-block mx-auto shadow" >}}


## Fire it up!

After few minutes, we will be able to connect a wi-fi device and use the PiRogue's dashboard. 

First, connect a wi-fi device such as your smartphone to the PiRogue's wi-fi network `PiRogue1` (default password: `superlongkey`). Next, open the PiRogue's dashboard by going at `http://<PiRogue IP address>:3000` with your Web browser or directly with this link:

[Learn how to operate your PiRogue →]({{< relref "operate">}})

It will take around 4 minutes before network flows start appearing in the dashboard. At the first start of your PiRogue the dashboard will look empty or broken. Don't worry, connect a device to the PiRogue's WiFi network, wait 5 minutes and refresh the dashboard by pressing `F5` key on your keyboard.

[Open your dashboard →](http://raspberrypi.local:3000) 

{{< alert icon="⚠️" >}}
The first time your PiRogue starts, some services would fail to start. See [how to check if your PiRogue is running properly]({{< relref "configure/#check-if-everything-runs-properly">}}).
{{< /alert >}}

[Connect to your PiRogue with SSH →]({{< relref "useful-commands/#connect-to-your-pirogue-with-ssh">}})

[Get the default configuration →]({{< relref "cheatsheet/#default-configuration">}})
